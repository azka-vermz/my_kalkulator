:root{
    --bg: #f7f7fb;
    --card: #ffffff;
    --text: #222;
    --muted: #6b6b7a;
    --accent: #7c5cff;
    --op: #ff7a7a;
  }
  
  [data-theme="dark"]{
    --bg: lab(14.53% -0.29 -3.12);
    --card: hsl(219, 11%, 35%);
    --text: #eee;
    --muted: #9aa0b4;
    --accent: #8b7bff;
    --op: #ff867a;
  }
  
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,'Helvetica Neue',Arial}
  body{background:var(--bg);color:var(--text);display:flex;align-items:center;justify-content:center;padding:20px}
  .app{width:100%;max-width:820px}
  .app-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
  .app-header h1{margin:0;font-weight:600}
  .controls button{background:transparent;border:1px solid rgba(0,0,0,0.06);padding:6px 8px;border-radius:8px;cursor:pointer}
  
  .calculator{display:grid;grid-template-columns:1fr 220px;gap:16px}
  .display{background:var(--card);padding:14px;border-radius:14px;box-shadow:0 6px 18px rgba(2,6,23,0.06)}
  .expr{min-height:28px;font-size:18px;color:var(--muted);word-wrap:break-word}
  .result{font-size:28px;font-weight:700;margin-top:6px}
  .history-preview{font-size:12px;color:var(--muted);min-height:18px}
  
  .keypad{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-top:12px}
  .btn{padding:16px;border-radius:10px;border:0;font-size:18px;cursor:pointer;box-shadow:0 2px 0 rgba(0,0,0,0.03)}
  .btn.num{background:#f2f4ff}
  .btn.op{background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent)}
  .btn.eq{grid-column:3/4;background:var(--accent);color:white}
  .btn.op{color:var(--op)}
  
  .history{background:var(--card);padding:12px;border-radius:12px;align-self:start}
  .history h2{margin:0 0 8px 0;font-size:16px}
  .history ul{list-style:none;padding:0;margin:0;max-height:320px;overflow:auto}
  .history li{padding:8px;border-radius:8px;margin-bottom:6px;background:rgba(0,0,0,0.03);cursor:pointer}
  .small{margin-top:8px;padding:8px 10px;border-radius:8px;border:0;background:transparent;cursor:pointer}
  
  .app-footer{margin-top:14px;text-align:center;color:var(--muted)}
  
  @media (max-width:700px){
    .calculator{grid-template-columns:1fr;}
    .history{order:3}
  }